panel:159 <h2><strong>1. Giới thiệu module json trong Python</strong></h2><p>Trong Python 3x có một module được tích hợp sẵn dùng để xử lý chuỗi JSON, đó là <strong>module json</strong>. Thư viện này được xây dựng từ mã Python thuần túy, tức là bạn không cần phải cài đặt thêm một thư viện phụ thuộc nào cả.</p><p>Sử dụng đoạn code sau để import thư viện này vào chương trình của bạn.</p><figure class="table"><table><tbody><tr><td>1</td><td><code>import</code> <code>json</code></td></tr></tbody></table></figure><p>Trường hợp bạn chưa có module này thì sử dụng lệnh sau để cài đặt.</p><figure class="table"><table><tbody><tr><td>1</td><td><code>pip install json</code></td></tr></tbody></table></figure><p>Đây là cấu trúc của một chuỗi JSON:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p></td><td><p><code>{</code></p><p><code>&nbsp;&nbsp;&nbsp; "firstName": "Cường",</code></p><p><code>&nbsp;&nbsp;&nbsp; "lastName": "Nguyễn",</code></p><p><code>&nbsp;&nbsp;&nbsp; "hobbies": ["Chạy bộ", "Lái xe", "Ăn uống"],</code></p><p><code>&nbsp;&nbsp;&nbsp; "age": 35,</code></p><p><code>&nbsp;&nbsp;&nbsp; "children": [</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "firstName": "Thư",</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "age": 7</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "firstName": "Thiên",</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "age": 4</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</code></p><p><code>&nbsp;&nbsp;&nbsp; ]</code></p><p><code>}</code></p></td></tr></tbody></table></figure><p>Như bạn thấy, trong chuỗi JSON này được tích hợp rất nhiều loại dữ liệu như:</p><ul><li>String</li><li>Number</li><li>Dict</li><li>List</li><li>Boolean</li></ul><p>Bảng sau đây mô tả dữ liệu được chuyển đổi giữa Python và JSON.</p><figure class="table"><table><thead><tr><th><strong>Python</strong></th><th><strong>JSON</strong></th></tr></thead><tbody><tr><td>dict, namedtuple</td><td>object</td></tr><tr><td>list, tuple</td><td>array</td></tr><tr><td>str, unicode</td><td>string</td></tr><tr><td>int, long, float</td><td>number</td></tr><tr><td>True</td><td>true</td></tr><tr><td>False</td><td>false</td></tr><tr><td>None</td><td>null</td></tr></tbody></table></figure><h2><strong>2. Chuyển chuỗi JSON thành Python Object</strong></h2><p><strong>Lưu ý</strong>: Việc chuyển đổi này thực chất là chuyển một chuỗi string có cấu trúc JSON thành một object trong Python.</p><p><strong>Ví dụ</strong>: Giả sử mình có cấu trúc chuỗi JSON như sau.</p><figure class="table"><table><tbody><tr><td>1</td><td><code>{"name":"Cường", "age"</code> <code>: 32, "blog":"freetuts.net"}</code></td></tr></tbody></table></figure><p>Thì cách chuyển như sau:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p></td><td><p><code>import</code> <code>json</code></p><p><code>text =</code> <code>'{"name":"Cường", "age" : 32, "blog":"freetuts.net"}'</code></p><p><code>jOject =</code> <code>json.loads(text)</code></p><p><code>print(jOject)</code></p><p><code>print(type(jOject))</code></p></td></tr></tbody></table></figure><p>Kết quả nó trả về một dict:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p></td><td><p><code>{'name': 'Cường', 'age': 32, 'blog': 'freetuts.net'}</code></p><p><code>&lt;class 'dict'&gt;</code></p></td></tr></tbody></table></figure><h2><strong>3. Chuyển Python Object thành chuỗi JSON</strong></h2><p>Để chuyển ngược lại từ Python Object thành chuỗi JSON thì ta sử dụng hàm <strong>dumps()</strong>.</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p></td><td><p><code>import</code> <code>json</code></p><p><code>obj =</code> <code>{"name":"Cường", "age"</code> <code>: 32, "blog":"freetuts.net"}</code></p><p><code>json =</code> <code>json.dumps(obj)</code></p><p><code>print(json)</code></p><p><code>print(type(json))</code></p></td></tr></tbody></table></figure><p>Kết quả sẽ trả về một chuỗi string bình thường:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p></td><td><p><code>{"name": "C\u01b0\u1eddng", "age": 32, "blog": "freetuts.net"}</code></p><p><code>&lt;class 'str'&gt;</code></p></td></tr></tbody></table></figure><h2><strong>4. Chuyển file JSON thành Python Object</strong></h2><p>Nếu bạn muốn đọc nội dung của một file json thành một Object trong Python thì sử dụng hàm <strong>dump()</strong>.</p><p>Giả sử mình có file <strong>infor.json</strong> có nội dung như sau:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p></td><td><p><code>{</code></p><p><code>&nbsp; "domain": "freetuts.net",</code></p><p><code>&nbsp; "owner": "Cuong Nguyen",</code></p><p><code>&nbsp; "topic": "Hoc Lap Trinh Mien Phi"</code></p><p><code>}</code></p></td></tr></tbody></table></figure><p>Bây giờ mình sẽ đọc file này và sao đó chuyển nội dung thành một object trong Python thì làm như sau:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p></td><td><p><code>import</code> <code>json</code></p><p><code>with open('infor.json') as f:</code></p><p><code>&nbsp;&nbsp;&nbsp; infor =</code> <code>json.load(f)</code></p><p><code>&nbsp;&nbsp;&nbsp; print(infor)</code></p><p><code>&nbsp;&nbsp;&nbsp; print(type(infor))</code></p></td></tr></tbody></table></figure><p>Kết quả:</p><figure class="table"><table><tbody><tr><td><p>1</p><p>2</p></td><td><p><code>{'domain': 'freetuts.net', 'owner': 'Cuong Nguyen', 'topic': 'Hoc Lap Trinh Mien Phi'}</code></p><p><code>&lt;class 'dict'&gt;</code></p></td></tr></tbody></table></figure><p><strong>Lưu ý</strong>: File JSON phải chứa nội dung đã được format sang định JSON nhé. Ví dụ bạn dùng tên có dấu tiếng Việt là không được, vì vậy cần lưu trữ chuỗi JSON cho chuẩn.</p><p>Việc xử lý JSON tương đối đơn giản nếu bạn đã từng làm việc với Object trong Javascript và mảng kết hợp trong PHP.</p><p>Qua bài này bạn đã biết được cách xử lý JSON trong Python bằng module json rồi đấy. Chúc bạn thực hiện thành công nhé!</p>
