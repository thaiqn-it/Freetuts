<!DOCTYPE html>
<!-- main-fragment(title, styles, body, scripts) -->
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/layout/main-layout :: main-fragment(
                                                ~{::title},
                                                ~{:: #styles},
                                                ~{::body},
                                                ~{:: #scripts},
                                               )}">

<head>
    <title>Freetuts - Admin</title>
</head>

<body>
<ul class="nav my-2">
    <li class="nav-item"><h4 class="card-title">Categories</h4></li>
    <li class="nav-item ml-auto">
        <!-- +new -->
        <a class="btn btn-primary text-white rounded-circle font-13"
           href="#"> <i class="fas fa-plus"></i> </a>
    </li>
</ul>

<div class="table-responsive">
    <table id="multi_col_order"
           class="table table-striped table-bordered display" style="width:100%">
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Created By</th>
            <th>Parent ID</th>
            <th style="text-align: center;">Available</th>
            <th>Edit</th>
        </tr>
        </thead>
        <tfoot>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Created By</th>
            <th>Parent ID</th>
            <th style="text-align: center;">Available</th>
            <th>Edit</th>
        </tr>
        </tfoot>
        <tbody>
        <tr th:each="category : ${categories}">
            <td th:text="${category.id}">Id</td>
            <td th:text="${category.name}">Name</td>
            <td th:text="${category.creatorName}">CreatedBy</td>
            <td th:text="${category.parentId}">ParentId</td>

            <td style="text-align: center;">
                <a th:if="${category.available == true}"
                   class="btn btn-success"
                   href="#"
                   data-toggle="modal"
                   data-target="#modalStatus"
                   onclick="updateStatus(this.id,this.name,true)"
                   th:id="${category.id}" th:name="${category.name}"
                   style="width: 40px; height: 40px;">
                    <i class="fas fa-check"></i>
                </a>
                <a th:if="${category.available == false}"
                   class="btn btn-danger"
                   href="#"
                   data-toggle="modal"
                   data-target="#modalStatus"
                   onclick="updateStatus(this.id,this.name,false)"
                   th:id="${category.id}" th:name="${category.name}"
                   style="width: 40px; height: 40px;">
                    <i class="fas fa-times"></i>
                </a>
            </td>

            <td style="text-align: center;">
                <a class="btn btn-primary"
                   href="javascript:void(0)"
                   style="width: 40px; height: 40px;">
                    <i class="far fa-edit"></i>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<th:block th:replace="/admin/common/___modal :: updateModal"></th:block>

<!-- Update Status -->
<script type="text/javascript">
        function updateStatus(id,name,status){
        	var text = '('+ id + ') ' + name;
        	$("#updateStatus_text").html(text);

            var before = "true";
            var after = "false";
            if (!status) {
                before = "false";
                after = "true";
            }

            $("#updateStatus_before").html(before);
            $("#updateStatus_after").html(after);
        	 
        	var confirm = "/admin/category/" + id + "/" + !status;
            var confirmBtnEle = $("#updateStatus_confirm");
    		confirmBtnEle.attr('href',confirm);
        }
</script>
<!-- ./Update Status -->
</body>

</html>